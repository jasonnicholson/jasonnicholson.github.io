<script src="/libs/katex/katex.min.js"></script>
<script src="/libs/katex/contrib/auto-render.min.js"></script>
<script>
	(function(){
		// If a page defines window.FRANKLIN_MATH_DISABLE=true, skip auto rendering.
		if (window.FRANKLIN_MATH_DISABLE === true) return;
		// Page may provide window.FRANKLIN_MATH_CONFIG to override delimiters/ignores.
		var cfg = window.FRANKLIN_MATH_CONFIG || null;
		if (!cfg) {
			// Try to find a JSON-config script placed inside the page (keeps config inside raw HTML fences)
			try {
				var cfgEl = document.getElementById('franklin-math-config');
				if (cfgEl && cfgEl.textContent) {
					cfg = JSON.parse(cfgEl.textContent);
					window.FRANKLIN_MATH_CONFIG = cfg;
				}
			} catch (e) {
				console && console.error && console.error('Failed to parse franklin math config JSON', e);
				cfg = null;
			}
		}
		try {
			if (cfg) {
				renderMathInElement(document.body, cfg);
			} else {
				// Default behavior (KaTeX auto-render defaults)
				renderMathInElement(document.body);
			}
		} catch (e) {
			console && console.error && console.error('KaTeX render error', e);
		}
	})();
	// To localize behavior per page, set window.FRANKLIN_MATH_CONFIG in the page content.
</script>
